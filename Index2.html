<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
		<!-- Define the title of the page -->
		<title>About Us</title>

		<script type="text/javascript">
		function readNFC() {
			if ('nfc' in navigator) {			
				const options = { mode: "any" };
				navigator.nfc.watch(message => processMessage(message), options);
			}
		}
		
		function consoleLog(data) {
			var logElement = document.getElementById("log");
			logElement.innerHTML += '\n' + data
		}
		
		function processMessage(message) {
		  for (let record of message.records) {
			//consoleLog("ReachedPM1");
			consoleLog("Data: " + record.data);
			consoleLog("Media Type: " + record.mediaType);
			consoleLog("Record Type: " + record.recordType );
			/*switch (record.recordType) {
			  case "empty"
				consoleLog('Empty ');
				break;
			  case "text":
				consoleLog('Data is text: ' + record.data);
				break;
			  case "url":
				console.log('Data is URL: ' + record.data);
				break;
			  case "json":
				console.log('JSON data: ' + record.data.myProperty.toString());
				break;
			  case "opaque":
				if (record.mediaType == 'image/png') {
				  var img = document.createElement("img");
				  img.src = URL.createObjectURL(new Blob([record.data], {type: record.mediaType}));
				  document.body.appendChild(img);
				  img.onload = function() {
					window.URL.revokeObjectURL(this.src);
				  };
				}
				break;
			}*/
			//consoleLog("ReachedPM4");
		  }
		}
		</script>		
		
		
	</head>
<body>
<p>
  <button class="btn btn-lg btn-default" onclick="readNFC()">Test NFC Read</button>
</p>

<pre id="log"></pre>

<p><small>Based on the code snippets from <a href="https://w3c.github.io/web-nfc/#examples">specification draft</a>.</small></p>
</body>
</html>
